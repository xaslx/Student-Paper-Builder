<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% block styles %}<link rel="stylesheet" href="{{ url_for('static', path='css/main.css') }}">{% endblock %}
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <title>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫—É—Ä—Å–æ–≤—ã—Ö –∏ –¥–∏–ø–ª–æ–º–Ω—ã—Ö —Ä–∞–±–æ—Ç</title>
</head>
<body>

    <div class="sidebar">
        <h1><a href="{{ url_for('main:page') }}" style="text-decoration: none; color: inherit;">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä</a></h1>
    
        <button id="newDocumentButton">–ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç</button>
  
        <input type="hidden" id="isAuthenticated" value="{{ 'true' if user else 'false' }}">
        <hr>
        <div class="history">
            <h3>–ò—Å—Ç–æ—Ä–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h3>
            <ul>
                {% if documents %}
                    {% for document in documents %}
                    <li class="document-item">
                        <a href="{{ url_for('documents:page', document_uuid=document.uuid) }}" class="document-link">
                            <span class="document-text">
                                {{ document.name }}
                            </span>
                            <span class="ellipsis" onclick="toggleMenu('menu-{{ document.uuid }}', event)"><b>...</b></span>
                            <span class="document-text">
                                {{ document.created_at.strftime('%d.%m.%y %H:%M') }}
                            </span>
                        </a>
                        <div class="document-menu" id="menu-{{ document.uuid }}">
                            <button onclick="confirmDeleteDocument('{{ document.uuid }}')">–£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    </li>
                    {% endfor %}
                {% else %}
                    <li><a href="#" style="pointer-events: none; color: gray;">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</a></li>
                {% endif %}
            </ul>
        </div>
        <div class="profile">
            <div class="profile-container" onclick="toggleProfileMenu()">
                <span class="profile-icon">üë§</span>
                <span>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
                <div class="profile-menu" id="profileMenu">
                    
                    <button onclick="aboutService()">–û —Å–µ—Ä–≤–∏—Å–µ</button>
                    {% if user %}
                        <button onclick="deleteAllDocuments()">–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</button>
                        <button type="submit" onclick=logout()>–í—ã–π—Ç–∏</button>
                    {% else %}
                        
                        <a href="{{ url_for('login:page') }}" class="no-style-link">
                            <button>–í–æ–π—Ç–∏</button>
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="main-content">
        {% block content %}
        
        {% endblock %}
    </div>
    <input type="hidden" id="aboutUrl" value="{{ url_for('about:page') }}">
    <input type="hidden" id="loginUrl" value="{{ url_for('login:page') }}">
    {% block scripts %}
        <script src="{{ url_for('static', path='js/main.js') }}" defer></script>
    {% endblock %}
</body>
</html>